<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TO√ëA EVENTOS - Gestor de Eventos</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .logo-img { height: 52px; width: 52px; object-fit: cover; object-position: center top; display: inline-block; vertical-align: middle; margin-right: 10px; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        const LOGO_SRC = "data:image/png;base64,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";

        function imprimirSeccion(titulo, htmlContent, eventoInfo) {
            const ventana = window.open("", "_blank", "width=900,height=700");
            const fecha = eventoInfo.fecha ? new Date(eventoInfo.fecha + "T00:00").toLocaleDateString("es-CO", { weekday: "long", year: "numeric", month: "long", day: "numeric" }) : "";
            ventana.document.write("<!DOCTYPE html><html lang=\"es\"><head><meta charset=\"UTF-8\"><title>" + titulo + " - " + (eventoInfo.nombre || "Evento") + "</title><style>*{margin:0;padding:0;box-sizing:border-box;}body{font-family:Arial,sans-serif;padding:30px;color:#1a1a1a;}. header{border-bottom:3px solid #7c3aed;padding-bottom:16px;margin-bottom:24px;display:flex;align-items:center;gap:12px;}.header-logo{height:48px;width:48px;object-fit:cover;object-position:center top;}.header-title{font-size:24px;color:#7c3aed;font-weight:bold;}.header-sub{font-size:12px;color:#888;margin-top:3px;}.info-bar{display:flex;gap:20px;flex-wrap:wrap;margin-bottom:20px;background:#f5f3ff;padding:12px 16px;border-radius:8px;font-size:13px;}.info-bar span{color:#555;}.info-bar b{color:#7c3aed;}h2{font-size:17px;color:#7c3aed;margin-bottom:14px;border-left:4px solid #ec4899;padding-left:10px;}table{width:100%;border-collapse:collapse;margin-bottom:16px;font-size:13px;}th{background:#ede9fe;color:#5b21b6;padding:8px 10px;text-align:left;border:1px solid #c4b5fd;}td{padding:7px 10px;border:1px solid #e5e7eb;vertical-align:top;}tr:nth-child(even) td{background:#fafafa;}.task{display:flex;align-items:flex-start;gap:10px;padding:8px 0;border-bottom:1px solid #f0f0f0;font-size:14px;}.task-done{text-decoration:line-through;color:#999;}.check{width:15px;height:15px;border:2px solid #7c3aed;border-radius:3px;display:inline-flex;align-items:center;justify-content:center;flex-shrink:0;margin-top:2px;font-size:10px;}.check-done{background:#7c3aed;color:white;}.tl-block{margin-bottom:20px;border:1px solid #e5e7eb;border-radius:8px;overflow:hidden;}.tl-head{background:#ede9fe;padding:9px 14px;font-weight:bold;color:#5b21b6;font-size:14px;}.tl-row{display:flex;border-bottom:1px solid #f0f0f0;}.tl-hour{width:76px;flex-shrink:0;padding:6px 12px;background:#faf5ff;color:#7c3aed;font-weight:bold;font-size:13px;border-right:1px solid #e5e7eb;}.tl-act{flex:1;padding:6px 12px;font-size:13px;}.ag-item{padding:10px;border:1px solid #e5e7eb;border-radius:6px;margin-bottom:10px;}.ag-date{font-weight:bold;color:#7c3aed;font-size:13px;margin-bottom:4px;}.ag-text{font-size:13px;white-space:pre-wrap;}.notas-box{background:#faf5ff;border:1px solid #c4b5fd;border-radius:8px;padding:14px;font-size:13px;white-space:pre-wrap;}.badge{display:inline-block;background:#ede9fe;color:#7c3aed;border-radius:20px;padding:2px 10px;font-size:11px;font-weight:bold;}.footer{margin-top:28px;border-top:1px solid #e5e7eb;padding-top:10px;font-size:11px;color:#aaa;display:flex;justify-content:space-between;}@media print{body{padding:15px;}@page{margin:1cm;}}<\/style><\/head><body>");
            ventana.document.write("<div class=\"header\"><img class=\"header-logo\" src=\"" + LOGO_SRC + "\" /><div><div class=\"header-title\">TO√ëA EVENTOS<\/div><div class=\"header-sub\">Generado el " + new Date().toLocaleDateString("es-CO", {weekday:"long",year:"numeric",month:"long",day:"numeric"}) + "<\/div><\/div><\/div>");
            ventana.document.write("<div class=\"info-bar\">");
            ventana.document.write("<span>üìã <b>" + (eventoInfo.nombre || "Sin nombre") + "<\/b><\/span>");
            if (fecha) ventana.document.write("<span>üìÖ <b>" + fecha + "<\/b><\/span>");
            if (eventoInfo.horas) ventana.document.write("<span>üïê <b>" + eventoInfo.horas + "<\/b><\/span>");
            if (eventoInfo.ubicacion) ventana.document.write("<span>üìç <b>" + eventoInfo.ubicacion + "<\/b><\/span>");
            if (eventoInfo.contacto) ventana.document.write("<span>üìû <b>" + eventoInfo.contacto + "<\/b><\/span>");
            ventana.document.write("<\/div>");
            ventana.document.write("<h2>" + titulo + "<\/h2>");
            ventana.document.write(htmlContent);
            ventana.document.write("<div class=\"footer\"><span>TO√ëA EVENTOS<\/span><span>" + titulo + " | " + (eventoInfo.nombre || "") + "<\/span><\/div>");
            ventana.document.write("<script>window.onload=function(){setTimeout(function(){window.print();},400);};<\/scr" + "ipt>");
            ventana.document.write("<\/body><\/html>");
            ventana.document.close();
        }

        function App() {
            const [eventos, setEventos] = useState([]);
            const [activo, setActivo] = useState(null);
            const [seccionActiva, setSeccionActiva] = useState("pendientes");

            useEffect(() => {
                const data = localStorage.getItem("tona-eventos");
                if (data) { try { setEventos(JSON.parse(data)); } catch(e) {} }
            }, []);

            useEffect(() => {
                localStorage.setItem("tona-eventos", JSON.stringify(eventos));
            }, [eventos]);

            const crearEvento = () => {
                const e = {
                    id: Date.now(), nombre: "", fecha: "", horas: "", ubicacion: "",
                    contacto: "", notas: "", pendientes: [], timelines: [],
                    galeria: [], invitados: [], proveedores: [], agenda: []
                };
                setEventos([...eventos, e]);
                setActivo(e.id);
                setSeccionActiva("pendientes");
            };

            const evento = eventos.find(e => e.id === activo);
            const actualizarEvento = (cambios) => setEventos(eventos.map(e => e.id === activo ? { ...e, ...cambios } : e));
            const eliminarEvento = (id) => {
                if (window.confirm("¬øSeguro que quieres eliminar este evento?")) {
                    setEventos(eventos.filter(e => e.id !== id));
                    if (activo === id) setActivo(null);
                }
            };

            const imprimirResumen = (e) => {
                const html = `<table><thead><tr><th>Campo</th><th>Detalle</th></tr></thead><tbody>
                    <tr><td>üìå Nombre</td><td>${e.nombre||"‚Äî"}</td></tr>
                    <tr><td>üìÖ Fecha</td><td>${e.fecha ? new Date(e.fecha+"T00:00").toLocaleDateString("es-CO",{weekday:"long",year:"numeric",month:"long",day:"numeric"}) : "‚Äî"}</td></tr>
                    <tr><td>üïê Horario</td><td>${e.horas||"‚Äî"}</td></tr>
                    <tr><td>üìç Ubicaci√≥n</td><td>${e.ubicacion||"‚Äî"}</td></tr>
                    <tr><td>üìû Contacto</td><td>${e.contacto||"‚Äî"}</td></tr>
                    <tr><td>‚úÖ Pendientes</td><td>${e.pendientes.length} tarea(s)</td></tr>
                    <tr><td>‚è∞ Timeline</td><td>${e.timelines.length} timeline(s)</td></tr>
                    <tr><td>üë• Invitados</td><td>${e.invitados.length}</td></tr>
                    <tr><td>ü§ù Proveedores</td><td>${e.proveedores.length}</td></tr>
                    </tbody></table>
                    ${e.notas ? "<h2 style=\"margin-top:16px\">üìù Notas</h2><div class=\"notas-box\">"+e.notas+"</div>" : ""}`;
                imprimirSeccion("üìã Resumen del Evento", html, e);
            };

            if (!evento) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-purple-100 to-pink-100 p-2 sm:p-4">
                        <div className="max-w-4xl mx-auto">
                            <div className="bg-white rounded-xl sm:rounded-2xl shadow-xl p-4 sm:p-8 mb-4 sm:mb-6">
                                <div className="flex items-center mb-2 sm:mb-3">
                                    <img src={LOGO_SRC} className="logo-img" alt="To√±a logo" />
                                    <h1 className="text-2xl sm:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600">TO√ëA EVENTOS</h1>
                                </div>
                                <p className="text-sm sm:text-base text-gray-600 mb-4 sm:mb-6">Gestiona tus eventos de manera profesional</p>
                                <button onClick={crearEvento}
                                    className="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 sm:px-8 py-2 sm:py-4 rounded-lg sm:rounded-xl font-bold text-sm sm:text-lg hover:shadow-2xl transform hover:scale-105 transition-all duration-200">
                                    ‚ú® Crear Nuevo Evento
                                </button>
                            </div>
                            {eventos.length === 0 ? (
                                <div className="bg-white rounded-xl sm:rounded-2xl shadow-xl p-8 sm:p-12 text-center">
                                    <div className="text-4xl sm:text-6xl mb-4">üéä</div>
                                    <p className="text-base sm:text-xl text-gray-600 mb-2">No tienes eventos creados</p>
                                    <p className="text-xs sm:text-sm text-gray-500">Haz clic en "Crear Nuevo Evento" para comenzar</p>
                                </div>
                            ) : (
                                <div className="grid gap-3 sm:gap-4">
                                    {eventos.map(e => (
                                        <div key={e.id} className="bg-white rounded-xl sm:rounded-2xl shadow-lg p-4 sm:p-6 hover:shadow-2xl transition-shadow">
                                            <div className="flex flex-col sm:flex-row justify-between items-start gap-3">
                                                <div className="flex-1 w-full">
                                                    <h3 className="text-lg sm:text-2xl font-bold text-gray-900 mb-2">{e.nombre || "Evento sin nombre"}</h3>
                                                    <div className="space-y-1 text-sm text-gray-600">
                                                        {e.fecha && <div className="flex items-center gap-2"><span>üìÖ</span><span>{new Date(e.fecha+"T00:00").toLocaleDateString("es-CO",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}</span></div>}
                                                        {e.ubicacion && <div className="flex items-center gap-2"><span>üìç</span><span>{e.ubicacion}</span></div>}
                                                        {e.horas && <div className="flex items-center gap-2"><span>üïê</span><span>{e.horas}</span></div>}
                                                    </div>
                                                </div>
                                                <div className="flex gap-2 w-full sm:w-auto">
                                                    <button onClick={() => { setActivo(e.id); setSeccionActiva("pendientes"); }}
                                                        className="flex-1 sm:flex-none bg-blue-500 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg sm:rounded-xl hover:bg-blue-600 transition-colors text-sm font-semibold">Abrir</button>
                                                    <button onClick={() => imprimirResumen(e)}
                                                        className="bg-purple-500 text-white px-3 sm:px-4 py-2 sm:py-3 rounded-lg sm:rounded-xl hover:bg-purple-600 transition-colors text-sm font-semibold" title="Imprimir resumen">üñ®Ô∏è</button>
                                                    <button onClick={(ev) => { ev.stopPropagation(); eliminarEvento(e.id); }}
                                                        className="bg-red-500 text-white px-3 sm:px-4 py-2 sm:py-3 rounded-lg sm:rounded-xl hover:bg-red-600 transition-colors text-base sm:text-xl">üóëÔ∏è</button>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    </div>
                );
            }

            const secciones = [
                { id: "pendientes", nombre: "Pendientes", icono: "‚úÖ" },
                { id: "linetime",   nombre: "Timeline",   icono: "‚è∞" },
                { id: "galeria",    nombre: "Galer√≠a",    icono: "üì∏" },
                { id: "invitados",  nombre: "Invitados",  icono: "üë•" },
                { id: "proveedores",nombre: "Proveedores",icono: "ü§ù" },
                { id: "agenda",     nombre: "Agenda",     icono: "üìÜ" }
            ];

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-100 to-pink-100 p-2 sm:p-4">
                    <div className="max-w-6xl mx-auto">
                        <button onClick={() => setActivo(null)}
                            className="bg-white px-3 sm:px-6 py-2 sm:py-3 rounded-lg sm:rounded-xl shadow-lg mb-3 sm:mb-6 hover:shadow-xl transition-all text-sm sm:text-base font-semibold text-gray-700 hover:text-purple-600">‚Üê Volver</button>

                        <div className="bg-white rounded-xl sm:rounded-2xl shadow-xl p-4 sm:p-8 mb-3 sm:mb-6">
                            <div className="flex justify-between items-center mb-3 sm:mb-6 gap-3 flex-wrap">
                                <h2 className="text-xl sm:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600">üìã Detalles del Evento</h2>
                                <button onClick={() => {
                                    const html = `<table><thead><tr><th>Campo</th><th>Detalle</th></tr></thead><tbody>
                                        <tr><td>üìå Nombre</td><td>${evento.nombre||"‚Äî"}</td></tr>
                                        <tr><td>üìÖ Fecha</td><td>${evento.fecha ? new Date(evento.fecha+"T00:00").toLocaleDateString("es-CO",{weekday:"long",year:"numeric",month:"long",day:"numeric"}) : "‚Äî"}</td></tr>
                                        <tr><td>üïê Horario</td><td>${evento.horas||"‚Äî"}</td></tr>
                                        <tr><td>üìç Ubicaci√≥n</td><td>${evento.ubicacion||"‚Äî"}</td></tr>
                                        <tr><td>üìû Contacto</td><td>${evento.contacto||"‚Äî"}</td></tr>
                                        </tbody></table>
                                        ${evento.notas ? "<h2 style=\"margin-top:16px\">üìù Notas</h2><div class=\"notas-box\">"+evento.notas+"</div>" : ""}`;
                                    imprimirSeccion("üìã Detalles", html, evento);
                                }} className="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-2 rounded-lg hover:shadow-lg transition-all text-sm font-semibold">üñ®Ô∏è Imprimir Detalles</button>
                            </div>
                            <div className="grid gap-2 sm:gap-4">
                                <input className="border-2 border-gray-300 p-2 sm:p-4 rounded-lg sm:rounded-xl focus:border-purple-500 focus:outline-none text-sm sm:text-lg"
                                    placeholder="Nombre del evento" value={evento.nombre} onChange={e => actualizarEvento({ nombre: e.target.value })} />
                                <input type="date" className="border-2 border-gray-300 p-2 sm:p-4 rounded-lg sm:rounded-xl focus:border-purple-500 focus:outline-none text-sm sm:text-lg"
                                    value={evento.fecha} onChange={e => actualizarEvento({ fecha: e.target.value })} />
                                <input className="border-2 border-gray-300 p-2 sm:p-4 rounded-lg sm:rounded-xl focus:border-purple-500 focus:outline-none text-sm sm:text-lg"
                                    placeholder="Horario (ej: 6:00 PM - 11:00 PM)" value={evento.horas} onChange={e => actualizarEvento({ horas: e.target.value })} />
                                <input className="border-2 border-gray-300 p-2 sm:p-4 rounded-lg sm:rounded-xl focus:border-purple-500 focus:outline-none text-sm sm:text-lg"
                                    placeholder="Ubicaci√≥n" value={evento.ubicacion} onChange={e => actualizarEvento({ ubicacion: e.target.value })} />
                                <input className="border-2 border-gray-300 p-2 sm:p-4 rounded-lg sm:rounded-xl focus:border-purple-500 focus:outline-none text-sm sm:text-lg"
                                    placeholder="Contacto principal" value={evento.contacto} onChange={e => actualizarEvento({ contacto: e.target.value })} />
                                <textarea className="border-2 border-gray-300 p-2 sm:p-4 rounded-lg sm:rounded-xl focus:border-purple-500 focus:outline-none text-sm sm:text-lg"
                                    placeholder="Notas adicionales" rows="3" value={evento.notas} onChange={e => actualizarEvento({ notas: e.target.value })} />
                            </div>
                        </div>

                        <div className="bg-white rounded-xl sm:rounded-2xl shadow-xl mb-3 sm:mb-6 overflow-hidden">
                            <div className="flex overflow-x-auto scrollbar-hide">
                                {secciones.map(sec => (
                                    <button key={sec.id} onClick={() => setSeccionActiva(sec.id)}
                                        className={`flex-1 min-w-fit px-3 sm:px-6 py-2 sm:py-4 font-semibold text-xs sm:text-lg transition-all border-b-4 whitespace-nowrap ${seccionActiva === sec.id ? "bg-gradient-to-r from-purple-600 to-pink-600 text-white border-purple-600" : "bg-white text-gray-700 border-transparent hover:bg-gray-50"}`}>
                                        <span className="mr-1">{sec.icono}</span>
                                        <span className="hidden sm:inline">{sec.nombre}</span>
                                        <span className="sm:hidden">{sec.nombre.split(" ")[0]}</span>
                                    </button>
                                ))}
                            </div>
                        </div>

                        {seccionActiva === "pendientes"  && <SeccionPendientes  evento={evento} actualizar={actualizarEvento} imprimirSeccion={imprimirSeccion} />}
                        {seccionActiva === "linetime"    && <SeccionTimeline    evento={evento} actualizar={actualizarEvento} imprimirSeccion={imprimirSeccion} />}
                        {seccionActiva === "galeria"     && <SeccionGaleria     evento={evento} actualizar={actualizarEvento} imprimirSeccion={imprimirSeccion} />}
                        {seccionActiva === "invitados"   && <SeccionTabla titulo="üë• Invitados"   campo="invitados"   evento={evento} actualizar={actualizarEvento} imprimirSeccion={imprimirSeccion} />}
                        {seccionActiva === "proveedores" && <SeccionTabla titulo="ü§ù Proveedores" campo="proveedores" evento={evento} actualizar={actualizarEvento} imprimirSeccion={imprimirSeccion} />}
                        {seccionActiva === "agenda"      && <SeccionAgenda      evento={evento} actualizar={actualizarEvento} imprimirSeccion={imprimirSeccion} />}
                    </div>
                </div>
            );
        }

        /* ‚îÄ‚îÄ PENDIENTES ‚îÄ‚îÄ */
        function SeccionPendientes({ evento, actualizar, imprimirSeccion }) {
            const [txt, setTxt] = useState("");
            const agregar = () => {
                if (txt.trim()) {
                    actualizar({ pendientes: [...evento.pendientes, { id: Date.now(), txt: txt.trim(), ok: false }] });
                    setTxt("");
                }
            };
            const imprimir = () => {
                const comp = evento.pendientes.filter(p => p.ok).length;
                const html = evento.pendientes.length === 0
                    ? "<p style=\"color:#aaa;text-align:center;padding:24px\">No hay tareas pendientes</p>"
                    : `<div style="margin-bottom:12px"><span class="badge">${comp}/${evento.pendientes.length} completadas</span></div>` +
                      evento.pendientes.map(p =>
                        `<div class="task"><div class="check ${p.ok?"check-done":""}">${p.ok?"‚úì":""}</div><span class="${p.ok?"task-done":""}">${p.txt}</span></div>`
                      ).join("");
                imprimirSeccion("‚úÖ Lista de Pendientes", html, evento);
            };
            return (
                <section className="bg-white rounded-xl sm:rounded-2xl shadow-xl p-4 sm:p-8">
                    <div className="flex justify-between items-center mb-3 sm:mb-6">
                        <h3 className="text-lg sm:text-2xl font-bold text-purple-900">‚úÖ Pendientes</h3>
                        <button onClick={imprimir} className="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-3 sm:px-5 py-2 rounded-lg hover:shadow-lg transition-all text-xs sm:text-sm font-semibold">üñ®Ô∏è Imprimir</button>
                    </div>
                    <div className="flex gap-2 sm:gap-3 mb-3 sm:mb-6">
                        <input className="border-2 border-gray-300 p-2 sm:p-4 flex-1 rounded-lg sm:rounded-xl focus:border-purple-500 focus:outline-none text-sm sm:text-lg"
                            placeholder="Nueva tarea..." value={txt} onChange={e => setTxt(e.target.value)} onKeyPress={e => e.key==="Enter" && agregar()} />
                        <button className="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 sm:px-8 py-2 sm:py-4 rounded-lg sm:rounded-xl hover:shadow-lg transition-all font-bold text-lg" onClick={agregar}>+</button>
                    </div>
                    <div className="space-y-2 sm:space-y-3">
                        {evento.pendientes.length === 0
                            ? <p className="text-gray-500 text-center py-8 text-sm sm:text-lg">No hay tareas pendientes</p>
                            : evento.pendientes.map(p => (
                                <div key={p.id} className="flex items-center gap-2 sm:gap-4 bg-gray-50 p-2 sm:p-4 rounded-lg sm:rounded-xl hover:bg-gray-100 transition-colors">
                                    <input type="checkbox" checked={p.ok} className="w-4 h-4 sm:w-6 sm:h-6 cursor-pointer accent-purple-600"
                                        onChange={() => actualizar({ pendientes: evento.pendientes.map(x => x.id===p.id ? {...x,ok:!x.ok} : x) })} />
                                    <span className={`flex-1 text-sm sm:text-lg ${p.ok?"line-through text-gray-500":"text-gray-900"}`}>{p.txt}</span>
                                    <button className="text-red-600 hover:bg-red-100 px-2 sm:px-4 py-1 sm:py-2 rounded-lg transition-colors text-base sm:text-xl"
                                        onClick={() => actualizar({ pendientes: evento.pendientes.filter(x => x.id!==p.id) })}>üóëÔ∏è</button>
                                </div>
                            ))
                        }
                    </div>
                </section>
            );
        }

        /* ‚îÄ‚îÄ TIMELINE ‚îÄ‚îÄ */
        function SeccionTimeline({ evento, actualizar, imprimirSeccion }) {
            const [nombre, setNombre] = useState("");
            const crear = () => {
                const n = nombre.trim() || `Timeline ${evento.timelines.length + 1}`;
                const horas = {};
                for (let h = 6; h <= 23; h++) horas[`${h}:00`] = "";
                actualizar({ timelines: [...evento.timelines, { id: Date.now(), nombre: n, horas }] });
                setNombre("");
            };
            const imprimir = () => {
                const html = evento.timelines.length === 0
                    ? "<p style=\"color:#aaa;text-align:center;padding:24px\">No hay timelines</p>"
                    : evento.timelines.map(t =>
                        `<div class="tl-block"><div class="tl-head">‚è∞ ${t.nombre}</div>` +
                        (Object.entries(t.horas).filter(([,v])=>v).map(([h,v]) =>
                            `<div class="tl-row"><div class="tl-hour">${h}</div><div class="tl-act">${v}</div></div>`
                        ).join("") || `<div style="padding:10px;color:#aaa;font-size:13px;">Sin actividades</div>`) +
                        "</div>"
                      ).join("");
                imprimirSeccion("‚è∞ Timeline", html, evento);
            };
            return (
                <section className="bg-white rounded-xl sm:rounded-2xl shadow-xl p-4 sm:p-8">
                    <div className="flex justify-between items-center mb-3 sm:mb-6">
                        <h3 className="text-lg sm:text-2xl font-bold text-purple-900">‚è∞ Timeline</h3>
                        <button onClick={imprimir} className="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-3 sm:px-5 py-2 rounded-lg hover:shadow-lg transition-all text-xs sm:text-sm font-semibold">üñ®Ô∏è Imprimir</button>
                    </div>
                    <div className="flex gap-2 sm:gap-3 mb-3 sm:mb-6">
                        <input className="border-2 border-gray-300 p-2 sm:p-4 flex-1 rounded-lg sm:rounded-xl focus:border-purple-500 focus:outline-none text-sm sm:text-lg"
                            placeholder="Nombre del timeline (opcional)" value={nombre} onChange={e => setNombre(e.target.value)} onKeyPress={e => e.key==="Enter" && crear()} />
                        <button onClick={crear} className="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 sm:px-8 py-2 sm:py-4 rounded-lg sm:rounded-xl hover:shadow-lg transition-all text-sm font-semibold whitespace-nowrap">+ Crear</button>
                    </div>
                    {evento.timelines.length === 0
                        ? <p className="text-gray-500 text-center py-8 text-sm sm:text-lg">No hay timelines creados</p>
                        : <div className="space-y-3 sm:space-y-6">
                            {evento.timelines.map(t => (
                                <div key={t.id} className="border-2 border-gray-200 rounded-lg sm:rounded-xl p-3 sm:p-6 bg-gray-50">
                                    <div className="flex gap-2 sm:gap-3 items-center mb-3 sm:mb-4">
                                        <input className="border-2 border-purple-300 p-2 sm:p-3 flex-1 rounded-lg sm:rounded-xl focus:border-purple-500 focus:outline-none text-sm sm:text-lg font-bold text-purple-900"
                                            value={t.nombre} placeholder="Nombre del timeline"
                                            onChange={e => actualizar({ timelines: evento.timelines.map(x => x.id===t.id ? {...x,nombre:e.target.value} : x) })} />
                                        <button className="bg-red-600 text-white hover:bg-red-700 px-3 sm:px-6 py-2 sm:py-3 rounded-lg transition-colors text-xs sm:text-base font-semibold flex items-center gap-1"
                                            onClick={() => window.confirm("¬øEliminar este timeline?") && actualizar({ timelines: evento.timelines.filter(x => x.id!==t.id) })}>
                                            <span>üóëÔ∏è</span><span className="hidden sm:inline">Eliminar</span>
                                        </button>
                                    </div>
                                    <div className="space-y-2 sm:space-y-3">
                                        {Object.entries(t.horas).map(([h, v]) => (
                                            <div key={h} className="flex gap-2 sm:gap-4 items-center">
                                                <span className="font-bold text-purple-900 w-12 sm:w-24 text-xs sm:text-lg">{h}</span>
                                                <input className="border-2 border-gray-300 p-2 sm:p-3 flex-1 rounded-lg focus:border-purple-500 focus:outline-none text-sm sm:text-base"
                                                    placeholder="Actividad..." value={v}
                                                    onChange={e => {
                                                        const nuevasHoras = { ...t.horas, [h]: e.target.value };
                                                        actualizar({ timelines: evento.timelines.map(x => x.id===t.id ? {...x,horas:nuevasHoras} : x) });
                                                    }} />
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            ))}
                        </div>
                    }
                </section>
            );
        }

        /* ‚îÄ‚îÄ GALER√çA ‚îÄ‚îÄ */
        function SeccionGaleria({ evento, actualizar, imprimirSeccion }) {
            const [vista, setVista] = useState(null);
            const handleFile = (e) => {
                const nuevos = Array.from(e.target.files).map(f => ({
                    id: Date.now() + Math.random(), url: URL.createObjectURL(f),
                    tipo: f.type.startsWith("image") ? "image" : "video", nombre: f.name
                }));
                actualizar({ galeria: [...(evento.galeria||[]), ...nuevos] });
                e.target.value = "";
            };
            const eliminar = (id) => {
                const a = (evento.galeria||[]).find(x => x.id===id);
                if (a?.url?.startsWith("blob:")) URL.revokeObjectURL(a.url);
                actualizar({ galeria: (evento.galeria||[]).filter(x => x.id!==id) });
            };
            const descargar = (a) => {
                const l = document.createElement("a"); l.href=a.url; l.download=a.nombre;
                document.body.appendChild(l); l.click(); document.body.removeChild(l);
            };
            const imprimir = () => {
                const imgs = (evento.galeria||[]).filter(a => a.tipo==="image");
                const vids = (evento.galeria||[]).filter(a => a.tipo==="video");
                const html = (evento.galeria||[]).length === 0
                    ? "<p style=\"color:#aaa;text-align:center;padding:24px\">No hay archivos en la galer√≠a</p>"
                    : `<div style="margin-bottom:12px"><span class="badge">${imgs.length} imagen(es)</span> <span class="badge">${vids.length} video(s)</span></div>`
                    + `<div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:16px;">`
                    + imgs.map(a => `<div style="border:1px solid #e5e7eb;border-radius:8px;overflow:hidden;"><img src="${a.url}" style="width:100%;height:130px;object-fit:cover;"><div style="padding:3px 8px;font-size:11px;color:#666;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">${a.nombre}</div></div>`).join("")
                    + `</div>`
                    + (vids.length > 0 ? `<h2 style="margin-top:16px">üé¨ Videos (${vids.length})</h2>`+vids.map(v=>`<div class="task"><span>üé¨</span><span>${v.nombre}</span></div>`).join("") : "");
                imprimirSeccion("üì∏ Galer√≠a", html, evento);
            };
            return (
                <section className="bg-white rounded-xl sm:rounded-2xl shadow-xl p-4 sm:p-8">
                    <div className="flex justify-between items-center mb-3 sm:mb-6">
                        <h3 className="text-lg sm:text-2xl font-bold text-purple-900">üì∏ Galer√≠a</h3>
                        <button onClick={imprimir} className="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-3 sm:px-5 py-2 rounded-lg hover:shadow-lg transition-all text-xs sm:text-sm font-semibold">üñ®Ô∏è Imprimir</button>
                    </div>
                    <input type="file" multiple accept="image/*,video/*"
                        className="mb-3 sm:mb-6 block w-full text-xs sm:text-lg text-gray-600 file:mr-2 sm:file:mr-4 file:py-2 sm:file:py-4 file:px-3 sm:file:px-6 file:rounded-lg sm:file:rounded-xl file:border-0 file:text-xs sm:file:text-base file:font-semibold file:bg-purple-100 file:text-purple-700 hover:file:bg-purple-200 file:cursor-pointer cursor-pointer"
                        onChange={handleFile} />
                    {!(evento.galeria||[]).length
                        ? <p className="text-gray-500 text-center py-8 text-sm sm:text-lg">No hay fotos o videos</p>
                        : <div className="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-4">
                            {(evento.galeria||[]).map(a => (
                                <div key={a.id} className="relative rounded-lg sm:rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-shadow bg-gray-100">
                                    <div className="cursor-pointer" onClick={() => setVista(a)}>
                                        {a.tipo==="image"
                                            ? <img src={a.url} alt={a.nombre} className="h-32 sm:h-48 w-full object-cover" />
                                            : <div className="relative h-32 sm:h-48 w-full bg-gray-900 flex items-center justify-center">
                                                <video src={a.url} className="h-full w-full object-cover opacity-70" />
                                                <div className="absolute inset-0 flex items-center justify-center bg-black bg-opacity-30">
                                                    <span className="text-white text-3xl sm:text-5xl">‚ñ∂Ô∏è</span>
                                                </div>
                                              </div>
                                        }
                                    </div>
                                    <button className="absolute top-1 sm:top-2 right-1 sm:right-2 bg-red-600 text-white w-6 h-6 sm:w-10 sm:h-10 rounded-full hover:bg-red-700 font-bold text-xs sm:text-lg z-10"
                                        onClick={e => { e.stopPropagation(); eliminar(a.id); }}>‚úï</button>
                                    <div className="absolute bottom-0 left-0 right-0 bg-black bg-opacity-60 text-white text-xs p-1 truncate">{a.nombre}</div>
                                </div>
                            ))}
                        </div>
                    }
                    {vista && (
                        <div className="fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center z-50 p-2 sm:p-4" onClick={() => setVista(null)}>
                            <div className="relative w-full h-full flex flex-col items-center justify-center" onClick={e => e.stopPropagation()}>
                                <div className="absolute top-2 sm:top-4 right-2 sm:right-4 flex gap-2 sm:gap-3 z-10">
                                    <button className="bg-purple-600 text-white px-3 sm:px-4 py-2 sm:py-3 rounded-lg hover:bg-purple-700 text-xs sm:text-base font-semibold" onClick={() => descargar(vista)}>üíæ Descargar</button>
                                    <button className="bg-white text-gray-900 px-3 sm:px-4 py-2 sm:py-3 rounded-lg hover:bg-gray-200 text-lg sm:text-2xl font-bold" onClick={() => setVista(null)}>‚úï</button>
                                </div>
                                <div className="max-w-full max-h-full flex items-center justify-center">
                                    {vista.tipo==="image"
                                        ? <img src={vista.url} alt={vista.nombre} className="max-w-full max-h-[85vh] object-contain rounded-lg" />
                                        : <video src={vista.url} controls autoPlay className="max-w-full max-h-[85vh] rounded-lg" />
                                    }
                                </div>
                                <div className="absolute bottom-2 sm:bottom-4 left-0 right-0 text-center">
                                    <p className="text-white bg-black bg-opacity-60 inline-block px-4 py-2 rounded-lg text-xs sm:text-base">{vista.nombre}</p>
                                </div>
                            </div>
                        </div>
                    )}
                </section>
            );
        }

        /* ‚îÄ‚îÄ TABLA (Invitados / Proveedores) ‚îÄ‚îÄ */
        function SeccionTabla({ titulo, campo, evento, actualizar, imprimirSeccion }) {
            const lista = evento[campo] || [];
            const agregar = () => actualizar({ [campo]: [...lista, { id: Date.now(), nombre: "", cel: "", email: "", nota: "" }] });
            const upd = (id, k, v) => actualizar({ [campo]: lista.map(x => x.id===id ? {...x,[k]:v} : x) });
            const del = (id) => window.confirm("¬øEliminar?") && actualizar({ [campo]: lista.filter(x => x.id!==id) });
            const imprimir = () => {
                const html = lista.length === 0
                    ? "<p style=\"color:#aaa;text-align:center;padding:24px\">No hay registros</p>"
                    : `<div style="margin-bottom:12px"><span class="badge">${lista.length} registro(s)</span></div>`
                    + `<table><thead><tr><th>#</th><th>Nombre</th><th>Celular</th><th>Email</th><th>Notas</th></tr></thead><tbody>`
                    + lista.map((x,i) => `<tr><td>${i+1}</td><td>${x.nombre||"‚Äî"}</td><td>${x.cel||"‚Äî"}</td><td>${x.email||"‚Äî"}</td><td>${x.nota||"‚Äî"}</td></tr>`).join("")
                    + "</tbody></table>";
                imprimirSeccion(titulo, html, evento);
            };
            return (
                <section className="bg-white rounded-xl sm:rounded-2xl shadow-xl p-4 sm:p-8">
                    <div className="flex justify-between items-center mb-3 sm:mb-6 flex-wrap gap-2">
                        <h3 className="text-lg sm:text-2xl font-bold text-purple-900">{titulo}</h3>
                        <div className="flex gap-2">
                            <button onClick={imprimir} className="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-3 sm:px-5 py-2 rounded-lg hover:shadow-lg transition-all text-xs sm:text-sm font-semibold">üñ®Ô∏è Imprimir</button>
                            <button onClick={agregar} className="bg-green-600 text-white px-4 sm:px-8 py-2 sm:py-4 rounded-lg sm:rounded-xl hover:bg-green-700 transition-colors text-sm sm:text-base font-semibold">‚ûï Agregar</button>
                        </div>
                    </div>
                    {lista.length === 0
                        ? <p className="text-gray-500 text-center py-8 text-sm sm:text-lg">No hay registros</p>
                        : <div className="overflow-x-auto">
                            <table className="w-full border-collapse">
                                <thead>
                                    <tr className="bg-purple-100">
                                        {["Nombre","Celular","Email","Notas","Acci√≥n"].map(h => (
                                            <th key={h} className="border border-gray-300 p-2 sm:p-3 text-left text-xs sm:text-base font-bold text-purple-900">{h}</th>
                                        ))}
                                    </tr>
                                </thead>
                                <tbody>
                                    {lista.map((item, i) => (
                                        <tr key={item.id} className={i%2===0?"bg-white":"bg-gray-50"}>
                                            {[["nombre","text"],["cel","tel"],["email","email"],["nota","text"]].map(([k,t]) => (
                                                <td key={k} className="border border-gray-300 p-1 sm:p-2">
                                                    <input type={t} className="w-full p-1 sm:p-2 focus:outline-none focus:bg-purple-50 text-xs sm:text-base"
                                                        value={item[k]} onChange={e => upd(item.id,k,e.target.value)} placeholder={k.charAt(0).toUpperCase()+k.slice(1)} />
                                                </td>
                                            ))}
                                            <td className="border border-gray-300 p-1 sm:p-2 text-center">
                                                <button onClick={() => del(item.id)} className="text-red-600 hover:bg-red-100 px-2 py-1 rounded text-base sm:text-xl">üóëÔ∏è</button>
                                            </td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>
                    }
                </section>
            );
        }

        /* ‚îÄ‚îÄ AGENDA ‚îÄ‚îÄ */
        function SeccionAgenda({ evento, actualizar, imprimirSeccion }) {
            const [vista, setVista] = useState("mes");
            const [fechaActual, setFechaActual] = useState(new Date());
            const [notaSel, setNotaSel] = useState(null);
            const [editando, setEditando] = useState(false);
            const [texto, setTexto] = useState("");
            const agenda = evento.agenda || [];
            const meses = ["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];
            const dias = ["D","L","M","X","J","V","S"];

            const getNotaPorFecha = (f) => agenda.find(n => n.fecha === f.toISOString().split("T")[0]);
            const abrirNota = (f) => { setNotaSel(f); const n=getNotaPorFecha(f); setTexto(n?n.texto:""); setEditando(true); };
            const guardar = () => {
                const fs = notaSel.toISOString().split("T")[0];
                const existe = agenda.find(n => n.fecha===fs);
                actualizar({ agenda: existe ? agenda.map(n => n.fecha===fs ? {...n,texto} : n) : [...agenda,{id:Date.now(),fecha:fs,texto}] });
                setEditando(false); setTexto("");
            };
            const borrar = (f) => {
                const fs = f.toISOString().split("T")[0];
                if (window.confirm("¬øEliminar esta nota?")) {
                    actualizar({ agenda: agenda.filter(n => n.fecha!==fs) });
                    setNotaSel(null); setEditando(false); setTexto("");
                }
            };
            const imprimirNota = () => {
                const fs = notaSel.toISOString().split("T")[0];
                const n = agenda.find(x => x.fecha===fs);
                if (!n) return;
                const html = `<div class="ag-item"><div class="ag-date">üìÖ ${notaSel.toLocaleDateString("es-CO",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}</div><div class="ag-text">${n.texto}</div></div>`;
                imprimirSeccion("üìÜ Nota de Agenda", html, evento);
            };
            const imprimirTodo = () => {
                const ord = [...agenda].sort((a,b) => a.fecha.localeCompare(b.fecha));
                const html = ord.length === 0
                    ? "<p style=\"color:#aaa;text-align:center;padding:24px\">No hay notas en la agenda</p>"
                    : `<div style="margin-bottom:12px"><span class="badge">${ord.length} nota(s)</span></div>`
                    + ord.map(n => `<div class="ag-item"><div class="ag-date">üìÖ ${new Date(n.fecha+"T00:00").toLocaleDateString("es-CO",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}</div><div class="ag-text">${n.texto}</div></div>`).join("");
                imprimirSeccion("üìÜ Agenda completa", html, evento);
            };
            const getDiasMes = () => {
                const y=fechaActual.getFullYear(), m=fechaActual.getMonth();
                const prim=new Date(y,m,1), ult=new Date(y,m+1,0);
                const arr=[];
                for(let i=prim.getDay()-1;i>=0;i--) arr.push({fecha:new Date(y,m,-i),otro:true});
                for(let i=1;i<=ult.getDate();i++) arr.push({fecha:new Date(y,m,i),otro:false});
                const rest=7-(arr.length%7); if(rest<7) for(let i=1;i<=rest;i++) arr.push({fecha:new Date(y,m+1,i),otro:true});
                return arr;
            };
            return (
                <section className="bg-white rounded-xl sm:rounded-2xl shadow-xl p-4 sm:p-8">
                    <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-3 sm:mb-6 gap-2">
                        <h3 className="text-lg sm:text-2xl font-bold text-purple-900">üìÜ Agenda</h3>
                        <div className="flex gap-2 flex-wrap">
                            <button onClick={imprimirTodo} className="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-3 sm:px-5 py-2 rounded-lg hover:shadow-lg transition-all text-xs sm:text-sm font-semibold">üñ®Ô∏è Imprimir</button>
                            {["mes","a√±o"].map(v => (
                                <button key={v} onClick={() => setVista(v)}
                                    className={`px-3 sm:px-4 py-1 sm:py-2 rounded-lg text-xs sm:text-base font-semibold transition-colors ${vista===v?"bg-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`}>
                                    {v.charAt(0).toUpperCase()+v.slice(1)}
                                </button>
                            ))}
                        </div>
                    </div>
                    {vista === "mes" ? (
                        <>
                            <div className="flex justify-between items-center mb-3 sm:mb-6">
                                <button onClick={() => { const f=new Date(fechaActual); f.setMonth(f.getMonth()-1); setFechaActual(f); }} className="bg-purple-600 text-white px-3 sm:px-4 py-1 sm:py-2 rounded-lg hover:bg-purple-700 font-bold text-sm sm:text-base">‚Üê</button>
                                <h4 className="text-base sm:text-xl font-bold">{meses[fechaActual.getMonth()]} {fechaActual.getFullYear()}</h4>
                                <button onClick={() => { const f=new Date(fechaActual); f.setMonth(f.getMonth()+1); setFechaActual(f); }} className="bg-purple-600 text-white px-3 sm:px-4 py-1 sm:py-2 rounded-lg hover:bg-purple-700 font-bold text-sm sm:text-base">‚Üí</button>
                            </div>
                            <div className="grid grid-cols-7 gap-1 sm:gap-2">
                                {dias.map(d => <div key={d} className="text-center font-bold text-purple-900 py-1 sm:py-2 text-xs sm:text-base">{d}</div>)}
                                {getDiasMes().map((item,i) => {
                                    const nota = getNotaPorFecha(item.fecha);
                                    const hoy = item.fecha.toDateString() === new Date().toDateString();
                                    return (
                                        <button key={i} onClick={() => abrirNota(item.fecha)}
                                            className={`relative aspect-square p-1 sm:p-2 rounded-lg border-2 transition-all text-xs sm:text-base ${item.otro?"bg-gray-100 text-gray-400 border-gray-200":hoy?"bg-purple-100 text-purple-900 border-purple-600 font-bold":"bg-white text-gray-900 border-gray-300 hover:border-purple-400 hover:bg-purple-50"}`}>
                                            <div className="text-xs sm:text-sm">{item.fecha.getDate()}</div>
                                            {nota && !item.otro && <div className="absolute bottom-0.5 sm:bottom-1 left-1/2 transform -translate-x-1/2 w-1.5 h-1.5 sm:w-2 sm:h-2 bg-pink-600 rounded-full"></div>}
                                        </button>
                                    );
                                })}
                            </div>
                        </>
                    ) : (
                        <>
                            <div className="flex justify-between items-center mb-3 sm:mb-6">
                                <button onClick={() => { const f=new Date(fechaActual); f.setFullYear(f.getFullYear()-1); setFechaActual(f); }} className="bg-purple-600 text-white px-3 sm:px-4 py-1 sm:py-2 rounded-lg hover:bg-purple-700 font-bold text-sm sm:text-base">‚Üê</button>
                                <h4 className="text-base sm:text-xl font-bold">{fechaActual.getFullYear()}</h4>
                                <button onClick={() => { const f=new Date(fechaActual); f.setFullYear(f.getFullYear()+1); setFechaActual(f); }} className="bg-purple-600 text-white px-3 sm:px-4 py-1 sm:py-2 rounded-lg hover:bg-purple-700 font-bold text-sm sm:text-base">‚Üí</button>
                            </div>
                            <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 sm:gap-4">
                                {Array.from({length:12},(_,i)=>new Date(fechaActual.getFullYear(),i,1)).map((mes,i) => {
                                    const cnt = agenda.filter(n => { const f=new Date(n.fecha+"T00:00"); return f.getMonth()===mes.getMonth()&&f.getFullYear()===mes.getFullYear(); }).length;
                                    return (
                                        <button key={i} onClick={() => { setFechaActual(mes); setVista("mes"); }}
                                            className="bg-white border-2 border-gray-300 rounded-lg sm:rounded-xl p-3 sm:p-4 hover:border-purple-400 hover:bg-purple-50 transition-all">
                                            <div className="font-bold text-purple-900 text-sm sm:text-base">{meses[i]}</div>
                                            {cnt>0 && <div className="mt-1 sm:mt-2 text-xs sm:text-sm text-pink-600 font-semibold">{cnt} {cnt===1?"nota":"notas"}</div>}
                                        </button>
                                    );
                                })}
                            </div>
                        </>
                    )}
                    {editando && notaSel && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4">
                            <div className="bg-white rounded-xl sm:rounded-2xl p-4 sm:p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                                <h4 className="text-lg sm:text-2xl font-bold mb-3 sm:mb-4 text-purple-900">
                                    üìù {notaSel.toLocaleDateString("es-CO",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}
                                </h4>
                                <textarea className="w-full border-2 border-gray-300 p-3 sm:p-4 rounded-lg sm:rounded-xl focus:border-purple-500 focus:outline-none text-sm sm:text-lg mb-3 sm:mb-4"
                                    rows="8" placeholder="Escribe tu nota aqu√≠..." value={texto} onChange={e => setTexto(e.target.value)} />
                                <div className="flex flex-col sm:flex-row gap-2 sm:gap-3 flex-wrap">
                                    <button onClick={guardar} className="flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg sm:rounded-xl hover:shadow-lg text-sm sm:text-base font-semibold">üíæ Guardar</button>
                                    <button onClick={imprimirNota} className="bg-purple-500 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg sm:rounded-xl hover:bg-purple-600 text-sm sm:text-base font-semibold">üñ®Ô∏è Imprimir</button>
                                    {getNotaPorFecha(notaSel) && <button onClick={() => borrar(notaSel)} className="bg-red-600 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg sm:rounded-xl hover:bg-red-700 text-sm sm:text-base font-semibold">üóëÔ∏è Borrar</button>}
                                    <button onClick={() => { setEditando(false); setNotaSel(null); setTexto(""); }} className="bg-gray-400 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg sm:rounded-xl hover:bg-gray-500 text-sm sm:text-base font-semibold">Cancelar</button>
                                </div>
                            </div>
                        </div>
                    )}
                </section>
            );
        }

        ReactDOM.render(<App />, document.getElementById("root"));
    </script>
</body>
</html>
